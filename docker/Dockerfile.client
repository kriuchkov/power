FROM golang:1.17

ADD ./ $GOPATH/src
WORKDIR $GOPATH/src

ENV GOBIN $GOPATH/bin
ENV GOSUMDB off
ENV CGO_ENABLED=0 
ENV GOOS=linux
ENV POW_DEBUG=false

ENV CLIENT_HOST=10.5.0.6
ENV CLIENT_PORT=7092
ENV SERVER_HOST=10.5.0.5
ENV SERVER_PORT=8092

RUN make test
RUN go build  -o $GOBIN/client power/cmd/client
CMD ["client"]